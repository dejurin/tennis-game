<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tennis Game</title>
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700|Megrim" rel="stylesheet">
    <style>

        *,
        *::before,
        *::after {
            margin: 0px;
            padding: 0px;
            box-sizing: border-box;
            font-family: 'Josefin Sans', sans-serif;
        }

        [class*="brand"],
        [class*="title"] {
            font-family: 'Megrim', cursive;
        }
    </style>
</head>
<body>
    <header>
        <h1 class="site-brand">Tennis Game</h1>
    </header>
    <canvas id="gameCanvas" width="800" height="600">

    </canvas>


    <script>
        var canvas,
            context,
            ballX = 50,
            ballSpeedX = 15,
            ballY = 10,
            ballSpeedY = 4,
            paddleY = 250;

        const PADDLE_HEIGHT = 100;

        function calculateMousePos(e) {
            var rect = canvas.getBoundingClientRect(),
                root = document.documentElement;
                mouseX = e.clientX - rect.left - root.scrollLeft;
                mouseY = e.clientY - rect.top - root.scrollTop;
                console.log(e, rect, root);
                return{
                    x: mouseX,
                    y: mouseY
                }
        }
        window.onload = function()  {
            console.log('wihdow is loaded');
            canvas = document.getElementById('gameCanvas');
            context = canvas.getContext('2d');

            var framesPerSecond = 30;
            setInterval(function() {
                moveEverything();
                drawEverything();

            }, 1000/framesPerSecond);

            canvas.addEventListener('mousemove', function(e) {
                var mousePos = calculateMousePos(e);
                paddle1Y = mousePos.y-(PADDLE_HEIGHT/2);
            })
        }

        function moveEverything(){
            ballX = ballX + ballSpeedX ;

            if(ballX > canvas.width){
                ballSpeedX =- ballSpeedX;
            }

            if(ballX < 0){
                ballSpeedX =- ballSpeedX;
            }
            ballY = ballY + ballSpeedY ;

            if(ballY > canvas.height){
                ballSpeedY =- ballSpeedY;
            }

            if(ballY < 0){
                ballSpeedY =- ballSpeedY;
            }
        }

        function drawEverything() {

            colorRect(0, 0, canvas.width, canvas.height, 'black');
            colorRect(0, paddle1Y, 10, PADDLE_HEIGHT, 'white');
            colorRect(790, 210, 10, 100, 'white');
            // colorRect(ballX, 100, 10, 10, 'red');
            colorCircle(ballX, ballY, 10, 'white');
        }

        function colorCircle(centerX, centerY, radius, drawColor) {
            context.fillStyle = drawColor;
            context.beginPath();
            context.arc(centerX, centerY, radius, 0, Math.PI*2, true);
            context.fill();

        }

        function colorRect(leftX, topY, width, height, drawColor){

            context.fillStyle = drawColor;
            context.fillRect(leftX, topY, width, height);

        }
    </script>
</body>
</html>